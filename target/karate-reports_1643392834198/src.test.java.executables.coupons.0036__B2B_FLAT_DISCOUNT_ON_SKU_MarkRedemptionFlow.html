<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <link rel="stylesheet" href="res/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="res/karate-report.css" type="text/css"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <script type="text/javascript" src="res/jquery.min.js"></script>
    <script type="text/javascript" src="res/jquery.tablesorter.min.js"></script>
    <script type="text/javascript" src="res/bootstrap.min.js"></script>
    <script type="text/javascript" src="res/karate-report.js"></script>
    <title>src.test.java.executables.coupons.0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow</title>  
  </head>
  <body>   
    <div id="root-container">
      <div id="leftnav">
                
        <div>
  <div class="nav-logo">
    <a href="karate-summary.html">
      <img src="karate-logo.svg" alt="Karate"/>
    </a>
    <div class="nav-count">
      <div id="nav-pass" class="bg-success">1</div>
      <div id="nav-fail" class="bg-danger">1</div>
    </div>
  </div>
  <div id="nav-type">
    <div>Scenarios</div>
  </div>         
  <div id="nav-date">
    <div>2022-01-28 11:28:51 PM</div>
  </div>        
</div>

        <div class="nav-container">
          <div class="nav-item failed">
            <a href="#[1:71]"><span>[1:71]</span> <span>B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.</span></a>
          </div>
          <div class="nav-item passed">
            <a href="#[2:98]"><span>[2:98]</span> <span>B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.</span></a>
          </div>
        </div>
      </div>
      <div id="content">
        <div class="page-heading alert alert-primary">
          <a href="karate-summary.html">Summary</a><span class="feature-label">|</span>
          <a href="karate-tags.html">Tags</a><span class="feature-label">|</span>
          <span class="feature-label">Feature:</span>
          <span class="feature-path">src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature</span><span class="feature-label">|</span>
          <span class="feature-name">B2B_FLAT_DISCOUNT_ON_SKU MarkRedemptionFlow __0036</span>
          <span class="feature-description"></span>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[1:71]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[1:71]</span>
                <span class="scenario-name">B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time failed">
              <span>ms:</span>&nbsp;<span>38504</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[1:71]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.4">
      <div class="step-ref bg-step">4</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.4">23:27:59.896 Environment value is==========&gt; eat 
</div>   

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.5">
      <div class="step-ref bg-step">5</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>call read(&#39;support.feature@common_functions&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">95</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.5.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">src.test.java.executables.coupons.support</div>
      </div>
      <div class="time-cell passed">42</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.5">
      <div class="step-ref bg-step">5</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.6">
      <div class="step-ref bg-step">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def apiComponents = envConfig</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def DBUtils = Java.type(&#39;executables.utils.DBUtils&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">8</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.8">
      <div class="step-ref bg-step">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def db = new DBUtils(apiComponents[&#39;DB_url&#39;], apiComponents[&#39;DB_username&#39;], apiComponents[&#39;DB_password&#39;])</span>
      </div>
    </div>
    <div class="time-cell passed">30</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.12">
      <div class="step-ref bg-step">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure afterScenario =</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.5.0.call.0.12">function(){
var info = karate.info;
karate.log(info);
if(info.errorMessage){
   for (var i = 0; i = 0; i++) {
      try {
        karate.call(info.featureFileName);
        karate.log(&#39;*** RETRY SUCCESS *****&#39;)
        return;
      } catch (e) {
        karate.log(&#39;*** RETRY FAILED ***&#39;, i, e);
      }
    }
    karate.fail(&#39;test failed after retries: &#39; + i);
 }
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.32">
      <div class="step-ref bg-step">32</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def isValidDate =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.5.0.call.0.32">function(testDate){
//        var date_regex = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9]+$/;
//        if (!(date_regex.test(testDate))) {
if (!(testDate)){
return true;
}return true;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.43">
      <div class="step-ref bg-step">43</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def now =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.5.0.call.0.43">function() {
  return java.lang.System.currentTimeMillis()
}</div>

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def apiComponents = envConfig</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def schemaAndValidation = envSchema</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def DBUtils = Java.type(&#39;executables.utils.DBUtils&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.9">
      <div class="step-ref bg-step">9</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def db = new DBUtils(apiComponents[&#39;DB_url&#39;], apiComponents[&#39;DB_username&#39;], apiComponents[&#39;DB_password&#39;])</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.10">
      <div class="step-ref bg-step">10</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>header x-client-type = &quot;mpos&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.12">
      <div class="step-ref bg-step">12</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_flags = &quot;false&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.13">
      <div class="step-ref bg-step">13</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def headerJson = {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set headerJson.multi_redeem-enabled = redeem_flags</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set headerJson.Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.16">
      <div class="step-ref bg-step">16</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set headerJson.x-client-type = &#39;mpos&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.17">
      <div class="step-ref bg-step">17</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def masid = apiComponents[&#39;CMS_masid&#39;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># redemption count</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.19">
      <div class="step-ref bg-step">19</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212221 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212221+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2009</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.20">
      <div class="step-ref bg-step">20</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212223 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212223+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2330</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.21">
      <div class="step-ref bg-step">21</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212222 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212222+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2573</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.22">
      <div class="step-ref bg-step">22</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212221 = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212221+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1381</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.23">
      <div class="step-ref bg-step">23</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212223 = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212223+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1246</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.24">
      <div class="step-ref bg-step">24</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212222 = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212222+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1225</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.26">
      <div class="step-ref bg-step">26</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def sku_price = apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].price</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.27">
      <div class="step-ref bg-step">27</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def bill_amount = apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption__0036&quot;].billAmount</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.28">
      <div class="step-ref bg-step">28</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def result = callonce read(&quot;B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption&quot;) {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}</span>
      </div>
    </div>
    <div class="time-cell passed">4467</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.28">23:28:15.264 &lt;&lt; lock released, cached callonce: read(&quot;B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption&quot;) {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
</div>   

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.28.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">src.test.java.executables.coupons.B2C_B2B_CouponCodeGeneration</div>
      </div>
      <div class="time-cell passed">4428</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.5">
      <div class="step-ref bg-step">5</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.28.0.call.0.5">23:28:10.815 &gt;&gt; lock acquired, begin callonce: read(&quot;B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption&quot;) {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.6">
      <div class="step-ref bg-step">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>call read(&#39;support.feature@common_functions&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">19</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row" data-parent="0.28.0.call">
      <div class="step-container" id="0.28.0.call.0.6.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">src.test.java.executables.coupons.support</div>
      </div>
      <div class="time-cell passed">4</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.6.0.call">
    <div class="step-container" id="0.28.0.call.0.6.0.call.0.5">
      <div class="step-ref bg-step">5</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.6.0.call">
    <div class="step-container" id="0.28.0.call.0.6.0.call.0.6">
      <div class="step-ref bg-step">6</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def apiComponents = envConfig</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.6.0.call">
    <div class="step-container" id="0.28.0.call.0.6.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def DBUtils = Java.type(&#39;executables.utils.DBUtils&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.6.0.call">
    <div class="step-container" id="0.28.0.call.0.6.0.call.0.8">
      <div class="step-ref bg-step">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def db = new DBUtils(apiComponents[&#39;DB_url&#39;], apiComponents[&#39;DB_username&#39;], apiComponents[&#39;DB_password&#39;])</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.6.0.call">
    <div class="step-container" id="0.28.0.call.0.6.0.call.0.12">
      <div class="step-ref bg-step">12</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure afterScenario =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.28.0.call.0.6.0.call.0.12">function(){
var info = karate.info;
karate.log(info);
if(info.errorMessage){
   for (var i = 0; i = 0; i++) {
      try {
        karate.call(info.featureFileName);
        karate.log(&#39;*** RETRY SUCCESS *****&#39;)
        return;
      } catch (e) {
        karate.log(&#39;*** RETRY FAILED ***&#39;, i, e);
      }
    }
    karate.fail(&#39;test failed after retries: &#39; + i);
 }
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.6.0.call">
    <div class="step-container" id="0.28.0.call.0.6.0.call.0.32">
      <div class="step-ref bg-step">32</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def isValidDate =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.28.0.call.0.6.0.call.0.32">function(testDate){
//        var date_regex = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9]+$/;
//        if (!(date_regex.test(testDate))) {
if (!(testDate)){
return true;
}return true;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.6.0.call">
    <div class="step-container" id="0.28.0.call.0.6.0.call.0.43">
      <div class="step-ref bg-step">43</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def now =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.28.0.call.0.6.0.call.0.43">function() {
  return java.lang.System.currentTimeMillis()
}</div>

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def apiComponents = envConfig</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.8">
      <div class="step-ref bg-step">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.9">
      <div class="step-ref bg-step">9</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def call_configuration_table = callonce read(&#39;support.feature@switch_on_features&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">4125</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.28.0.call.0.9">23:28:14.975 &lt;&lt; lock released, cached callonce: read(&#39;support.feature@switch_on_features&#39;)
</div>   

  <div>
        
    <div class="step-row" data-parent="0.28.0.call">
      <div class="step-container" id="0.28.0.call.0.9.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-indent"></div>
        <div class="step-cell passed">src.test.java.executables.coupons.support</div>
      </div>
      <div class="time-cell passed">4109</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.9.0.call">
    <div class="step-container" id="0.28.0.call.0.9.0.call.0.5">
      <div class="step-ref bg-step">5</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.28.0.call.0.9.0.call.0.5">23:28:10.854 &gt;&gt; lock acquired, begin callonce: read(&#39;support.feature@switch_on_features&#39;)
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.9.0.call">
    <div class="step-container" id="0.28.0.call.0.9.0.call.0.6">
      <div class="step-ref bg-step">6</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def apiComponents = envConfig</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.9.0.call">
    <div class="step-container" id="0.28.0.call.0.9.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def DBUtils = Java.type(&#39;executables.utils.DBUtils&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.9.0.call">
    <div class="step-container" id="0.28.0.call.0.9.0.call.0.8">
      <div class="step-ref bg-step">8</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def db = new DBUtils(apiComponents[&#39;DB_url&#39;], apiComponents[&#39;DB_username&#39;], apiComponents[&#39;DB_password&#39;])</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.9.0.call">
    <div class="step-container" id="0.28.0.call.0.9.0.call.0.212">
      <div class="step-ref bg-step">212</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def enable_promotion = db.updateRow(&quot;UPDATE CONFIGURATION SET CONFIG_VALUE = \&#39;true\&#39; WHERE CONFIG_NAME = \&#39;promotion.enabled\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1991</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.9.0.call">
    <div class="step-container" id="0.28.0.call.0.9.0.call.0.213">
      <div class="step-ref bg-step">213</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def enable_voucher = db.updateRow(&quot;UPDATE CONFIGURATION SET CONFIG_VALUE = \&#39;true\&#39; WHERE CONFIG_NAME = \&#39;voucher.enabled\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1367</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call.0.9.0.call">
    <div class="step-container" id="0.28.0.call.0.9.0.call.0.214">
      <div class="step-ref bg-step">214</div>
      <div class="step-indent"></div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def enable_prompter = db.updateRow(&quot;UPDATE CONFIGURATION SET CONFIG_VALUE = \&#39;true\&#39; WHERE CONFIG_NAME = \&#39;prompter.enabled\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">750</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.968">
      <div class="step-ref bg-step">968</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def body = apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption__0036&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.969">
      <div class="step-ref bg-step">969</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set body.skuData[*].skuPrice = skuPrice</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.970">
      <div class="step-ref bg-step">970</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set body.billAmount = billAmount</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.971">
      <div class="step-ref bg-step">971</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set body.masId = apiComponents[&#39;CMS_masid&#39;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.972">
      <div class="step-ref bg-step">972</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/coupons/v1/coupons/merchant/fc/coupon-codes&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.973">
      <div class="step-ref bg-step">973</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>headers requestHeader</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.974">
      <div class="step-ref bg-step">974</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>And</span>&nbsp;<span>request body</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.975">
      <div class="step-ref bg-step">975</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>When</span>&nbsp;<span>method post</span>
      </div>
    </div>
    <div class="time-cell passed">281</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.28.0.call.0.975">23:28:15.082 request:
1 &gt; POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/coupon-codes
1 &gt; Content-Type: application/json; charset=UTF-8
1 &gt; multi_redeem-enabled: false
1 &gt; x-client-type: mpos
1 &gt; Content-Length: 267
1 &gt; Host: 10.159.20.62:9000
1 &gt; Connection: Keep-Alive
1 &gt; User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 &gt; Accept-Encoding: gzip,deflate
{&quot;masId&quot;:&quot;100001000071385&quot;,&quot;billAmount&quot;:5000,&quot;skuData&quot;:[{&quot;skuId&quot;:&quot;811143212221&quot;,&quot;articleId&quot;:&quot;lol&quot;,&quot;skuQty&quot;:2,&quot;skuPrice&quot;:11.4},{&quot;skuId&quot;:&quot;811143212222&quot;,&quot;articleId&quot;:&quot;lol&quot;,&quot;skuQty&quot;:2,&quot;skuPrice&quot;:11.4},{&quot;skuId&quot;:&quot;811143212223&quot;,&quot;articleId&quot;:&quot;lol&quot;,&quot;skuQty&quot;:9,&quot;skuPrice&quot;:11.4}]}

23:28:15.258 response time in milliseconds: 174
1 &lt; 200
1 &lt; Vary: Origin
1 &lt; Date: Fri, 28 Jan 2022 17:58:15 GMT
1 &lt; Content-Type: application/json
1 &lt; Content-Length: 2090
{&quot;skuCoupons&quot;:[{&quot;skuId&quot;:&quot;811143212223&quot;,&quot;quantity&quot;:9,&quot;price&quot;:11.4,&quot;coupons&quot;:[{&quot;couponId&quot;:0,&quot;discount&quot;:3.0,&quot;couponCode&quot;:&quot;KZBUGQTY&quot;,&quot;discountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;quantity&quot;:3,&quot;couponQty&quot;:0,&quot;priority&quot;:2,&quot;campaignType&quot;:0},{&quot;couponId&quot;:0,&quot;discount&quot;:3.0,&quot;couponCode&quot;:&quot;BR5QOFNP&quot;,&quot;discountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;quantity&quot;:3,&quot;couponQty&quot;:0,&quot;priority&quot;:1,&quot;campaignType&quot;:0},{&quot;couponId&quot;:0,&quot;discount&quot;:3.0,&quot;couponCode&quot;:&quot;37AXDJAG&quot;,&quot;discountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;quantity&quot;:3,&quot;couponQty&quot;:0,&quot;priority&quot;:0,&quot;campaignType&quot;:0}]},{&quot;skuId&quot;:&quot;811143212221&quot;,&quot;quantity&quot;:2,&quot;price&quot;:11.4,&quot;coupons&quot;:[{&quot;couponId&quot;:0,&quot;discount&quot;:2.1,&quot;couponCode&quot;:&quot;MT2SM3PA&quot;,&quot;discountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;quantity&quot;:2,&quot;couponQty&quot;:0,&quot;priority&quot;:0,&quot;campaignType&quot;:0}]},{&quot;skuId&quot;:&quot;811143212222&quot;,&quot;quantity&quot;:2,&quot;price&quot;:11.4,&quot;coupons&quot;:[{&quot;couponId&quot;:0,&quot;discount&quot;:1.1,&quot;couponCode&quot;:&quot;WN9VPI4N&quot;,&quot;discountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;quantity&quot;:1,&quot;couponQty&quot;:0,&quot;priority&quot;:1,&quot;campaignType&quot;:0},{&quot;couponId&quot;:0,&quot;discount&quot;:1.1,&quot;couponCode&quot;:&quot;LNHS2BE9&quot;,&quot;discountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;quantity&quot;:1,&quot;couponQty&quot;:0,&quot;priority&quot;:0,&quot;campaignType&quot;:0}]}],&quot;billCoupons&quot;:[],&quot;promotionsApplied&quot;:[],&quot;promotionMetaData&quot;:{},&quot;billVouchers&quot;:[{&quot;voucherCode&quot;:&quot;VoucherCode162e396&quot;,&quot;voucherTitle&quot;:&quot;Automation vouchers Never delete 4&quot;,&quot;redeemCode&quot;:&quot;UOUDICEH&quot;,&quot;discount&quot;:323.1}],&quot;cartOffersApplied&quot;:null,&quot;voucherRedemption&quot;:[],&quot;prompter&quot;:[{&quot;skuId&quot;:&quot;811143212221&quot;,&quot;skuPrice&quot;:11.4,&quot;couponId&quot;:167675,&quot;couponTitle&quot;:&quot;B2B_flat_discount_1_never_delete&quot;,&quot;b2BDiscountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;discountValue&quot;:2.1,&quot;requiredQuantity&quot;:2,&quot;quantityToAdd&quot;:2,&quot;remainingRedeemCount&quot;:99999522},{&quot;skuId&quot;:&quot;811143212222&quot;,&quot;skuPrice&quot;:11.4,&quot;couponId&quot;:167676,&quot;couponTitle&quot;:&quot;B2B_flat_discount_2_never_delete&quot;,&quot;b2BDiscountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;discountValue&quot;:1.1,&quot;requiredQuantity&quot;:1,&quot;quantityToAdd&quot;:1,&quot;remainingRedeemCount&quot;:99998555},{&quot;skuId&quot;:&quot;811143212223&quot;,&quot;skuPrice&quot;:11.4,&quot;couponId&quot;:167677,&quot;couponTitle&quot;:&quot;B2B_flat_discount_3_never_delete&quot;,&quot;b2BDiscountType&quot;:&quot;FLAT_DISCOUNT_ON_SKU&quot;,&quot;discountValue&quot;:3.0,&quot;requiredQuantity&quot;:3,&quot;quantityToAdd&quot;:3,&quot;remainingRedeemCount&quot;:99998151}]}
</div>   

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.28.0.call">
    <div class="step-container" id="0.28.0.call.0.976">
      <div class="step-ref bg-step">976</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>Then</span>&nbsp;<span>status 200</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.30">
      <div class="step-ref bg-step">30</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID = get result.response.skuCoupons[*].skuId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.31">
      <div class="step-ref bg-step">31</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID_index_811143212221 = skuID.indexOf(&quot;811143212221&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">25</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.32">
      <div class="step-ref bg-step">32</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID_index_811143212222 = skuID.indexOf(&quot;811143212222&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.33">
      <div class="step-ref bg-step">33</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID_index_811143212223 = skuID.indexOf(&quot;811143212223&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match each result.response.skuCoupons[*].coupons[0].couponQty == apiComponents.B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036.couponQty</span>
      </div>
    </div>
    <div class="time-cell passed">10</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.37">
      <div class="step-ref bg-step">37</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode1 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;coupons&quot;][0][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.38">
      <div class="step-ref bg-step">38</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode2 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][0][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.39">
      <div class="step-ref bg-step">39</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode3 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][1][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.40">
      <div class="step-ref bg-step">40</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode4 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][0][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.41">
      <div class="step-ref bg-step">41</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode5 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][1][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.42">
      <div class="step-ref bg-step">42</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode6 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][2][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.44">
      <div class="step-ref bg-step">44</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;coupons&quot;][0][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.45">
      <div class="step-ref bg-step">45</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][0][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.46">
      <div class="step-ref bg-step">46</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][1][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.47">
      <div class="step-ref bg-step">47</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][0][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.48">
      <div class="step-ref bg-step">48</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][1][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.49">
      <div class="step-ref bg-step">49</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][2][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.51">
      <div class="step-ref bg-step">51</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;quantity&quot;]  == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].quantity_811143212221</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;quantity&quot;]  == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].quantity_811143212222</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.53">
      <div class="step-ref bg-step">53</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;quantity&quot;]  == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].quantity_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.55">
      <div class="step-ref bg-step">55</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;coupons&quot;][0].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212221</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.56">
      <div class="step-ref bg-step">56</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][0].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212222</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.57">
      <div class="step-ref bg-step">57</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][1].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212222</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.58">
      <div class="step-ref bg-step">58</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][0].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.59">
      <div class="step-ref bg-step">59</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][1].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.60">
      <div class="step-ref bg-step">60</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][2].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.62">
      <div class="step-ref bg-step">62</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;price&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].price</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.64">
      <div class="step-ref bg-step">64</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def transactionID =</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.64">function(){ return java.lang.System.currentTimeMillis() }</div>

  

     

  

</div>
</div>
          <div data-parent="[1:71]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.68">
      <div class="step-ref bg-step">68</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def transaction_id = callonce transactionID</span>
      </div>
    </div>
    <div class="time-cell passed">7</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.68">23:28:15.320 &gt;&gt; lock acquired, begin callonce: transactionID
23:28:15.327 &lt;&lt; lock released, cached callonce: transactionID
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.73">
      <div class="step-ref passed">73</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def coupon_code_status = db.readRows(&quot;SELECT * FROM FC_MERCHANT_COUPONS WHERE MERCHANT_COUPON_CODE IN (\&#39;&quot; +couponCode1+ &quot;\&#39;,\&#39;&quot; +couponCode2+ &quot;\&#39;,\&#39;&quot; +couponCode3+ &quot;\&#39;,\&#39;&quot; +couponCode4+ &quot;\&#39;,\&#39;&quot; +couponCode5+ &quot;\&#39;,\&#39;&quot; +couponCode6+ &quot;\&#39;)&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">3391</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.74">
      <div class="step-ref passed">74</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print coupon_code_status</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.74">23:28:18.721 [print] [
  {
    &quot;ID&quot;: 1555780,
    &quot;COUPON&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_3_never_delete&quot;,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;CUSTOMER_COUPON_CODE&quot;: null,
    &quot;MERCHANT_COUPON_CODE&quot;: &quot;37AXDJAG&quot;,
    &quot;DISCOUNT_AMOUNT&quot;: 3,
    &quot;STATUS&quot;: &quot;hold&quot;,
    &quot;TRANSACTION_ID&quot;: &quot;0&quot;,
    &quot;CREATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CHECKOUT_TS&quot;: null,
    &quot;VERIFY_TS&quot;: null,
    &quot;REDEEM_TS&quot;: null,
    &quot;UPDATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CANCEL_TS&quot;: null,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;DELIVERED_TS&quot;: null,
    &quot;CAMPAIGN_TYPE&quot;: 0,
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;CONDITIONAL_COUPON&quot;: null,
    &quot;DISPLAY_NAME_ID&quot;: 1,
    &quot;CATEGORY_ID&quot;: 2,
    &quot;SUB_CATEGORY_ID&quot;: 3,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 500,
    &quot;HOLD_TS&quot;: &quot;2022-01-28 23:28:15.267637&quot;
  },
  {
    &quot;ID&quot;: 1555779,
    &quot;COUPON&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_3_never_delete&quot;,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;CUSTOMER_COUPON_CODE&quot;: null,
    &quot;MERCHANT_COUPON_CODE&quot;: &quot;BR5QOFNP&quot;,
    &quot;DISCOUNT_AMOUNT&quot;: 3,
    &quot;STATUS&quot;: &quot;hold&quot;,
    &quot;TRANSACTION_ID&quot;: &quot;0&quot;,
    &quot;CREATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CHECKOUT_TS&quot;: null,
    &quot;VERIFY_TS&quot;: null,
    &quot;REDEEM_TS&quot;: null,
    &quot;UPDATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CANCEL_TS&quot;: null,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;DELIVERED_TS&quot;: null,
    &quot;CAMPAIGN_TYPE&quot;: 0,
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;CONDITIONAL_COUPON&quot;: null,
    &quot;DISPLAY_NAME_ID&quot;: 1,
    &quot;CATEGORY_ID&quot;: 2,
    &quot;SUB_CATEGORY_ID&quot;: 3,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 500,
    &quot;HOLD_TS&quot;: &quot;2022-01-28 23:28:15.267637&quot;
  },
  {
    &quot;ID&quot;: 1555784,
    &quot;COUPON&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_3_never_delete&quot;,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;CUSTOMER_COUPON_CODE&quot;: null,
    &quot;MERCHANT_COUPON_CODE&quot;: &quot;KZBUGQTY&quot;,
    &quot;DISCOUNT_AMOUNT&quot;: 3,
    &quot;STATUS&quot;: &quot;hold&quot;,
    &quot;TRANSACTION_ID&quot;: &quot;0&quot;,
    &quot;CREATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CHECKOUT_TS&quot;: null,
    &quot;VERIFY_TS&quot;: null,
    &quot;REDEEM_TS&quot;: null,
    &quot;UPDATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CANCEL_TS&quot;: null,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;DELIVERED_TS&quot;: null,
    &quot;CAMPAIGN_TYPE&quot;: 0,
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;CONDITIONAL_COUPON&quot;: null,
    &quot;DISPLAY_NAME_ID&quot;: 1,
    &quot;CATEGORY_ID&quot;: 2,
    &quot;SUB_CATEGORY_ID&quot;: 3,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 500,
    &quot;HOLD_TS&quot;: &quot;2022-01-28 23:28:15.267637&quot;
  },
  {
    &quot;ID&quot;: 1555782,
    &quot;COUPON&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_2_never_delete&quot;,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;CUSTOMER_COUPON_CODE&quot;: null,
    &quot;MERCHANT_COUPON_CODE&quot;: &quot;LNHS2BE9&quot;,
    &quot;DISCOUNT_AMOUNT&quot;: 1.1,
    &quot;STATUS&quot;: &quot;hold&quot;,
    &quot;TRANSACTION_ID&quot;: &quot;0&quot;,
    &quot;CREATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CHECKOUT_TS&quot;: null,
    &quot;VERIFY_TS&quot;: null,
    &quot;REDEEM_TS&quot;: null,
    &quot;UPDATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CANCEL_TS&quot;: null,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;DELIVERED_TS&quot;: null,
    &quot;CAMPAIGN_TYPE&quot;: 0,
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;CONDITIONAL_COUPON&quot;: null,
    &quot;DISPLAY_NAME_ID&quot;: 1,
    &quot;CATEGORY_ID&quot;: 2,
    &quot;SUB_CATEGORY_ID&quot;: 3,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 400.5,
    &quot;HOLD_TS&quot;: &quot;2022-01-28 23:28:15.267637&quot;
  },
  {
    &quot;ID&quot;: 1555781,
    &quot;COUPON&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_1_never_delete&quot;,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;CUSTOMER_COUPON_CODE&quot;: null,
    &quot;MERCHANT_COUPON_CODE&quot;: &quot;MT2SM3PA&quot;,
    &quot;DISCOUNT_AMOUNT&quot;: 2.1,
    &quot;STATUS&quot;: &quot;hold&quot;,
    &quot;TRANSACTION_ID&quot;: &quot;0&quot;,
    &quot;CREATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CHECKOUT_TS&quot;: null,
    &quot;VERIFY_TS&quot;: null,
    &quot;REDEEM_TS&quot;: null,
    &quot;UPDATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CANCEL_TS&quot;: null,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;DELIVERED_TS&quot;: null,
    &quot;CAMPAIGN_TYPE&quot;: 0,
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;CONDITIONAL_COUPON&quot;: 168280,
    &quot;DISPLAY_NAME_ID&quot;: 1,
    &quot;CATEGORY_ID&quot;: 2,
    &quot;SUB_CATEGORY_ID&quot;: 3,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 450,
    &quot;HOLD_TS&quot;: &quot;2022-01-28 23:28:15.267637&quot;
  },
  {
    &quot;ID&quot;: 1555783,
    &quot;COUPON&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_2_never_delete&quot;,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;CUSTOMER_COUPON_CODE&quot;: null,
    &quot;MERCHANT_COUPON_CODE&quot;: &quot;WN9VPI4N&quot;,
    &quot;DISCOUNT_AMOUNT&quot;: 1.1,
    &quot;STATUS&quot;: &quot;hold&quot;,
    &quot;TRANSACTION_ID&quot;: &quot;0&quot;,
    &quot;CREATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CHECKOUT_TS&quot;: null,
    &quot;VERIFY_TS&quot;: null,
    &quot;REDEEM_TS&quot;: null,
    &quot;UPDATE_TS&quot;: &quot;2022-01-28 23:28:15.264677&quot;,
    &quot;CANCEL_TS&quot;: null,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;DELIVERED_TS&quot;: null,
    &quot;CAMPAIGN_TYPE&quot;: 0,
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;CONDITIONAL_COUPON&quot;: null,
    &quot;DISPLAY_NAME_ID&quot;: 1,
    &quot;CATEGORY_ID&quot;: 2,
    &quot;SUB_CATEGORY_ID&quot;: 3,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 400.5,
    &quot;HOLD_TS&quot;: &quot;2022-01-28 23:28:15.267637&quot;
  }
]
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.75">
      <div class="step-ref passed">75</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def b2b_coupons = db.readRows(&quot;SELECT * FROM B2B_COUPON WHERE ID IN (\&#39;&quot; +coupon_code_status[0][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[1][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[2][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[3][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[4][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;)&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">4265</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.76">
      <div class="step-ref passed">76</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print b2b_coupons</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.76">23:28:22.989 [print] [
  {
    &quot;ID&quot;: 167675,
    &quot;B2C_COUPON_ID&quot;: null,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;CAMPAIGN_TYPE&quot;: 4,
    &quot;CONDITIONAL_COUPON_ID&quot;: 185,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_1_never_delete&quot;,
    &quot;CREATE_TS&quot;: &quot;2021-09-02 16:35:19.121361&quot;,
    &quot;DERIVED_FROM&quot;: null,
    &quot;DISCOUNT_AMOUNT&quot;: 5.1,
    &quot;MASID&quot;: null,
    &quot;MERCHANT_GROUP&quot;: 581,
    &quot;MERCHANT_REDEEM_CAP&quot;: 100000000,
    &quot;QUANTITY&quot;: 2,
    &quot;REDEEM_COUNT&quot;: 479,
    &quot;SKU_ID&quot;: &quot;811143212221&quot;,
    &quot;SKU_NAME&quot;: &quot;Crack Jack Biscuits 1&quot;,
    &quot;STATUS&quot;: 0,
    &quot;TOTAL_REDEEM_CAP&quot;: 100000000,
    &quot;UPDATE_TS&quot;: &quot;2021-12-06 16:40:01.960191&quot;,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;VENDOR_FUNDING&quot;: &quot;No&quot;,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 450,
    &quot;BILL_CONDITION&quot;: null
  },
  {
    &quot;ID&quot;: 167676,
    &quot;B2C_COUPON_ID&quot;: null,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;CAMPAIGN_TYPE&quot;: 4,
    &quot;CONDITIONAL_COUPON_ID&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_2_never_delete&quot;,
    &quot;CREATE_TS&quot;: &quot;2021-09-02 16:35:19.121361&quot;,
    &quot;DERIVED_FROM&quot;: null,
    &quot;DISCOUNT_AMOUNT&quot;: 1.1,
    &quot;MASID&quot;: null,
    &quot;MERCHANT_GROUP&quot;: 581,
    &quot;MERCHANT_REDEEM_CAP&quot;: 100000000,
    &quot;QUANTITY&quot;: 1,
    &quot;REDEEM_COUNT&quot;: 1447,
    &quot;SKU_ID&quot;: &quot;811143212222&quot;,
    &quot;SKU_NAME&quot;: &quot;Crack Jack Biscuits 2&quot;,
    &quot;STATUS&quot;: 0,
    &quot;TOTAL_REDEEM_CAP&quot;: 100000000,
    &quot;UPDATE_TS&quot;: &quot;2021-12-06 16:40:01.960191&quot;,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;VENDOR_FUNDING&quot;: &quot;No&quot;,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 400.5,
    &quot;BILL_CONDITION&quot;: null
  },
  {
    &quot;ID&quot;: 167677,
    &quot;B2C_COUPON_ID&quot;: null,
    &quot;CAMPAIGN_ID&quot;: 1,
    &quot;CAMPAIGN_TYPE&quot;: 4,
    &quot;CONDITIONAL_COUPON_ID&quot;: null,
    &quot;COUPON_TITLE&quot;: &quot;B2B_flat_discount_3_never_delete&quot;,
    &quot;CREATE_TS&quot;: &quot;2021-09-02 16:35:19.121361&quot;,
    &quot;DERIVED_FROM&quot;: null,
    &quot;DISCOUNT_AMOUNT&quot;: 3,
    &quot;MASID&quot;: null,
    &quot;MERCHANT_GROUP&quot;: 581,
    &quot;MERCHANT_REDEEM_CAP&quot;: 100000000,
    &quot;QUANTITY&quot;: 3,
    &quot;REDEEM_COUNT&quot;: 1852,
    &quot;SKU_ID&quot;: &quot;811143212223&quot;,
    &quot;SKU_NAME&quot;: &quot;Crack Jack Biscuits 3&quot;,
    &quot;STATUS&quot;: 0,
    &quot;TOTAL_REDEEM_CAP&quot;: 100000000,
    &quot;UPDATE_TS&quot;: &quot;2021-12-08 13:21:31.817789&quot;,
    &quot;VALID_FROM&quot;: &quot;2020-05-13 00:00:00.0&quot;,
    &quot;VALID_TO&quot;: &quot;2029-12-11 00:00:00.0&quot;,
    &quot;VENDOR_FUNDING&quot;: &quot;No&quot;,
    &quot;VENDOR_CONTRIBUTION&quot;: 0,
    &quot;MINIMUM_BILL_VALUE&quot;: 500,
    &quot;BILL_CONDITION&quot;: null
  }
]
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.77">
      <div class="step-ref passed">77</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def b2b_coupon_redemption = db.readRows(&quot;SELECT * FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (\&#39;&quot; +coupon_code_status[0][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[1][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[2][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[3][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;,\&#39;&quot; +coupon_code_status[4][&quot;B2B_COUPON_ID&quot;]+ &quot;\&#39;)&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">4093</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.78">
      <div class="step-ref passed">78</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>print b2b_coupon_redemption</span>
      </div>
    </div>
    <div class="time-cell passed">2</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.78">23:28:27.083 [print] [
  {
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;MASID&quot;: &quot;100001000063788&quot;,
    &quot;QUANTITY&quot;: 2
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000070211&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000063788&quot;,
    &quot;QUANTITY&quot;: 1
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;MASID&quot;: &quot;100001000063788&quot;,
    &quot;QUANTITY&quot;: 3
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000217520&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;MASID&quot;: &quot;100001000217520&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;MASID&quot;: &quot;100001000217520&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;QUANTITY&quot;: 452
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;QUANTITY&quot;: 1408
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;MASID&quot;: &quot;100001000071385&quot;,
    &quot;QUANTITY&quot;: 1794
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;MASID&quot;: &quot;100001000071386&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000063836&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;MASID&quot;: &quot;100001000063836&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;MASID&quot;: &quot;100001000063836&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000071386&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;MASID&quot;: &quot;100001000071386&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000070644&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;MASID&quot;: &quot;100001000070644&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;MASID&quot;: &quot;100001000070644&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167675,
    &quot;MASID&quot;: &quot;100001000072974&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167676,
    &quot;MASID&quot;: &quot;100001000072974&quot;,
    &quot;QUANTITY&quot;: 0
  },
  {
    &quot;B2B_COUPON_ID&quot;: 167677,
    &quot;MASID&quot;: &quot;100001000072974&quot;,
    &quot;QUANTITY&quot;: 0
  }
]
 
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.79">
      <div class="step-ref passed">79</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def schema = schemaAndValidation[&quot;hold_FC_merchant_coupon&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.80">
      <div class="step-ref passed">80</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match each coupon_code_status == schema</span>
      </div>
    </div>
    <div class="time-cell passed">27</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.82">
      <div class="step-ref passed">82</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212221_c = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212221+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1460</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.83">
      <div class="step-ref passed">83</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212223_c = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212223+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1359</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.84">
      <div class="step-ref passed">84</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212222_c = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212222+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1321</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.85">
      <div class="step-ref passed">85</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212221_c = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212221+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2456</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.86">
      <div class="step-ref passed">86</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212223_c = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212223+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2641</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.87">
      <div class="step-ref passed">87</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212222_c = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212222+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2075</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># redemption count</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.90">
      <div class="step-ref failed">90</div>
      
      <div class="step-cell failed">
        <span>*</span>&nbsp;<span>match parseInt(redeem_quantity_811143212221_c[0].QUANTITY) == parseInt(redeem_quantity_811143212221[0].QUANTITY + 1)</span>
      </div>
    </div>
    <div class="time-cell failed">10</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.90">23:28:38.435 src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:90
* match parseInt(redeem_quantity_811143212221_c[0].QUANTITY) == parseInt(redeem_quantity_811143212221[0].QUANTITY + 1)
match failed: EQUALS
  $ | not equal (NUMBER:NUMBER)
  452
  451

src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:90
</div>   

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.91">
      <div class="step-ref skipped">91</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>match parseInt(redeem_quantity_811143212223_c[0].QUANTITY) == parseInt(redeem_quantity_811143212223[0].QUANTITY + 3)</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.92">
      <div class="step-ref skipped">92</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>match parseInt(redeem_quantity_811143212222_c[0].QUANTITY) == parseInt(redeem_quantity_811143212222[0].QUANTITY + 2)</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.93">
      <div class="step-ref skipped">93</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>match parseInt(redeem_count_811143212221_c[0].REDEEM_COUNT) == parseInt(redeem_count_811143212221[0].REDEEM_COUNT + 1)</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.94">
      <div class="step-ref skipped">94</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>match parseInt(redeem_count_811143212223_c[0].REDEEM_COUNT) == parseInt(redeem_count_811143212223[0].REDEEM_COUNT + 3)</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.95">
      <div class="step-ref skipped">95</div>
      
      <div class="step-cell skipped">
        <span>*</span>&nbsp;<span>match parseInt(redeem_count_811143212222_c[0].REDEEM_COUNT) == parseInt(redeem_count_811143212222[0].REDEEM_COUNT + 2)</span>
      </div>
    </div>
    <div class="time-cell skipped">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.95">23:28:38.436 {
  &quot;errorMessage&quot;: &quot;match failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  452\n  451\n\nsrc/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:90&quot;,
  &quot;featureDir&quot;: &quot;/Users/rahul8.ranjan/Documents/cms-api-integration-test/src/test/java/executables/coupons&quot;,
  &quot;scenarioDescription&quot;: &quot;&quot;,
  &quot;scenarioName&quot;: &quot;B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.&quot;,
  &quot;featureFileName&quot;: &quot;0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature&quot;
}
 
</div>   

  

</div>
</div>
        </div>
        <div class="scenario">
          <div class="scenario-heading" id="[2:98]">
            <div class="heading-container">
              <div class="scenario-tags">
                
              </div>
              <div class="scenario-keyword">
                Scenario: <span>[2:98]</span>
                <span class="scenario-name">B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.</span>
                <span></span>
              </div>
            </div>
            <div class="scenario-time passed">
              <span>ms:</span>&nbsp;<span>13172</span>
            </div>
          </div>
          <div class="step-row">
            <div class="step-container" id="[2:98]bg">
              <div class="step-ref bg-step">&gt;&gt;</div>
              <div class="step-cell passed">Background:</div>
            </div>
            <div class="time-cell passed"></div>
          </div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.4">
      <div class="step-ref bg-step">4</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.4">23:28:38.478 Environment value is==========&gt; eat 
</div>   

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.5">
      <div class="step-ref bg-step">5</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>call read(&#39;support.feature@common_functions&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">15</div>
  </div>

   
  
  

  

     

  <div>
        
    <div class="step-row">
      <div class="step-container" id="0.5.0.call">
        <div class="step-ref bg-step">&gt;&gt;</div>
        <div class="step-indent"></div>
        <div class="step-cell passed">src.test.java.executables.coupons.support</div>
      </div>
      <div class="time-cell passed">1</div>
    </div>
    <div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.5">
      <div class="step-ref bg-step">5</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>url baseUrl</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.6">
      <div class="step-ref bg-step">6</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def apiComponents = envConfig</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.7">
      <div class="step-ref bg-step">7</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def DBUtils = Java.type(&#39;executables.utils.DBUtils&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.8">
      <div class="step-ref bg-step">8</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def db = new DBUtils(apiComponents[&#39;DB_url&#39;], apiComponents[&#39;DB_username&#39;], apiComponents[&#39;DB_password&#39;])</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.12">
      <div class="step-ref bg-step">12</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>configure afterScenario =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.5.0.call.0.12">function(){
var info = karate.info;
karate.log(info);
if(info.errorMessage){
   for (var i = 0; i = 0; i++) {
      try {
        karate.call(info.featureFileName);
        karate.log(&#39;*** RETRY SUCCESS *****&#39;)
        return;
      } catch (e) {
        karate.log(&#39;*** RETRY FAILED ***&#39;, i, e);
      }
    }
    karate.fail(&#39;test failed after retries: &#39; + i);
 }
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.32">
      <div class="step-ref bg-step">32</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def isValidDate =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.5.0.call.0.32">function(testDate){
//        var date_regex = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9]+$/;
//        if (!(date_regex.test(testDate))) {
if (!(testDate)){
return true;
}return true;
}</div>

  

     

  

</div>
</div>
      <div><div>
  

  

  <div class="step-row" data-parent="0.5.0.call">
    <div class="step-container" id="0.5.0.call.0.43">
      <div class="step-ref bg-step">43</div>
      <div class="step-indent"></div>
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def now =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.5.0.call.0.43">function() {
  return java.lang.System.currentTimeMillis()
}</div>

  

     

  

</div>
</div>
    </div>    
  </div>

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.6">
      <div class="step-ref bg-step">6</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def apiComponents = envConfig</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.7">
      <div class="step-ref bg-step">7</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def schemaAndValidation = envSchema</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.8">
      <div class="step-ref bg-step">8</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def DBUtils = Java.type(&#39;executables.utils.DBUtils&#39;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.9">
      <div class="step-ref bg-step">9</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def db = new DBUtils(apiComponents[&#39;DB_url&#39;], apiComponents[&#39;DB_username&#39;], apiComponents[&#39;DB_password&#39;])</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.10">
      <div class="step-ref bg-step">10</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>header Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.11">
      <div class="step-ref bg-step">11</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>header x-client-type = &quot;mpos&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.12">
      <div class="step-ref bg-step">12</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_flags = &quot;false&quot;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.13">
      <div class="step-ref bg-step">13</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def headerJson = {}</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.14">
      <div class="step-ref bg-step">14</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set headerJson.multi_redeem-enabled = redeem_flags</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.15">
      <div class="step-ref bg-step">15</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set headerJson.Content-Type = &#39;application/json&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.16">
      <div class="step-ref bg-step">16</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>set headerJson.x-client-type = &#39;mpos&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.17">
      <div class="step-ref bg-step">17</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def masid = apiComponents[&#39;CMS_masid&#39;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># redemption count</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.19">
      <div class="step-ref bg-step">19</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212221 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212221+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1616</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.20">
      <div class="step-ref bg-step">20</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212223 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212223+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2555</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.21">
      <div class="step-ref bg-step">21</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_quantity_811143212222 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212222+ &quot;\&#39;)) and masid=\&#39;&quot; +masid+ &quot;\&#39;&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">2590</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.22">
      <div class="step-ref bg-step">22</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212221 = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212221+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">3410</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.23">
      <div class="step-ref bg-step">23</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212223 = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212223+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1254</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.24">
      <div class="step-ref bg-step">24</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def redeem_count_811143212222 = db.readRows(&quot;SELECT REDEEM_COUNT FROM B2B_COUPON WHERE ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212222+ &quot;\&#39;))&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">1704</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.26">
      <div class="step-ref bg-step">26</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def sku_price = apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].price</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.27">
      <div class="step-ref bg-step">27</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def bill_amount = apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption__0036&quot;].billAmount</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.28">
      <div class="step-ref bg-step">28</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def result = callonce read(&quot;B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption&quot;) {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}</span>
      </div>
    </div>
    <div class="time-cell passed">15</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.30">
      <div class="step-ref bg-step">30</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID = get result.response.skuCoupons[*].skuId</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.31">
      <div class="step-ref bg-step">31</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID_index_811143212221 = skuID.indexOf(&quot;811143212221&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.32">
      <div class="step-ref bg-step">32</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID_index_811143212222 = skuID.indexOf(&quot;811143212222&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.33">
      <div class="step-ref bg-step">33</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def skuID_index_811143212223 = skuID.indexOf(&quot;811143212223&quot;)</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.35">
      <div class="step-ref bg-step">35</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>match each result.response.skuCoupons[*].coupons[0].couponQty == apiComponents.B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036.couponQty</span>
      </div>
    </div>
    <div class="time-cell passed">1</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.37">
      <div class="step-ref bg-step">37</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode1 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;coupons&quot;][0][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.38">
      <div class="step-ref bg-step">38</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode2 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][0][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.39">
      <div class="step-ref bg-step">39</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode3 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][1][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.40">
      <div class="step-ref bg-step">40</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode4 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][0][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.41">
      <div class="step-ref bg-step">41</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode5 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][1][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.42">
      <div class="step-ref bg-step">42</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def couponCode6 = result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][2][&quot;couponCode&quot;]</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.44">
      <div class="step-ref bg-step">44</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;coupons&quot;][0][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.45">
      <div class="step-ref bg-step">45</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][0][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.46">
      <div class="step-ref bg-step">46</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][1][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.47">
      <div class="step-ref bg-step">47</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][0][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.48">
      <div class="step-ref bg-step">48</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][1][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.49">
      <div class="step-ref bg-step">49</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][2][&quot;discountType&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discountType</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.51">
      <div class="step-ref bg-step">51</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;quantity&quot;]  == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].quantity_811143212221</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.52">
      <div class="step-ref bg-step">52</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;quantity&quot;]  == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].quantity_811143212222</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.53">
      <div class="step-ref bg-step">53</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;quantity&quot;]  == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].quantity_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.55">
      <div class="step-ref bg-step">55</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;coupons&quot;][0].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212221</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.56">
      <div class="step-ref bg-step">56</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][0].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212222</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.57">
      <div class="step-ref bg-step">57</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212222][&quot;coupons&quot;][1].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212222</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.58">
      <div class="step-ref bg-step">58</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][0].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.59">
      <div class="step-ref bg-step">59</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][1].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.60">
      <div class="step-ref bg-step">60</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212223][&quot;coupons&quot;][2].discount == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].discount_811143212223</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.62">
      <div class="step-ref bg-step">62</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>assert result.response[&quot;skuCoupons&quot;][skuID_index_811143212221][&quot;price&quot;] == apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption_responseData__0036&quot;].price</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.64">
      <div class="step-ref bg-step">64</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def transactionID =</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.64">function(){ return java.lang.System.currentTimeMillis() }</div>

  

     

  

</div>
</div>
          <div data-parent="[2:98]bg"><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.68">
      <div class="step-ref bg-step">68</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def transaction_id = callonce transactionID</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment"># redemption count</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#  * def redeem_quantity_811143212221 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212221+ &quot;\&#39;))&quot;)</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#  * def redeem_quantity_811143212223 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212223+ &quot;\&#39;))&quot;)</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container">
      <div class="step-ref passed"></div>
      
      <div class="step-cell comment">#  * def redeem_quantity_811143212222 = db.readRows(&quot;SELECT QUANTITY FROM B2B_COUPON_REDEMPTION WHERE B2B_COUPON_ID IN (SELECT ID FROM B2B_COUPON bbc WHERE SKU_ID IN (\&#39;&quot; +811143212222+ &quot;\&#39;))&quot;)</div>
    </div>
    <div class="time-cell comment"></div>            
  </div>

  <div class="step-row">
    <div class="step-container" id="0.103">
      <div class="step-ref passed">103</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>header override_flag = redeem_flags</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.104">
      <div class="step-ref passed">104</div>
      
      <div class="step-cell passed">
        <span>*</span>&nbsp;<span>def body =</span>
      </div>
    </div>
    <div class="time-cell passed">3</div>
  </div>

   
  
  <div class="preformatted" data-parent="0.104">{
&quot;masId&quot;: &quot;#(masid)&quot;,
&quot;billAmount&quot;: #(apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption__0036&quot;].billAmount),
&quot;transactionId&quot;: &quot;#(transaction_id)&quot;,
&quot;couponCodes&quot;:[#(couponCode1), #(couponCode2), #(couponCode3), #(couponCode4), #(couponCode5), #(couponCode6)],
&quot;skuData&quot;: #(apiComponents[&quot;B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption__0036&quot;].skuData)
}</div>

  

     

  

</div>
</div>
          <div><div>
  

  

  <div class="step-row">
    <div class="step-container" id="0.115">
      <div class="step-ref passed">115</div>
      
      <div class="step-cell passed">
        <span>Given</span>&nbsp;<span>path &#39;/coupons/v1/coupons/merchant/fc/checkout&#39;</span>
      </div>
    </div>
    <div class="time-cell passed">0</div>
  </div>

   
  
  

  

  <div class="preformatted" data-parent="0.115">23:28:51.656 {
  &quot;errorMessage&quot;: null,
  &quot;featureDir&quot;: &quot;/Users/rahul8.ranjan/Documents/cms-api-integration-test/src/test/java/executables/coupons&quot;,
  &quot;scenarioDescription&quot;: &quot;&quot;,
  &quot;scenarioName&quot;: &quot;B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.&quot;,
  &quot;featureFileName&quot;: &quot;0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature&quot;
}
 
</div>   

  

</div>
</div>
        </div>
      </div>
    </div>
  </body>
</html>


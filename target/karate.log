23:27:58.327 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
23:27:59.895 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:27:59.944 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:28:00.011 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:28:00.013 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'isValidDate' with new value: function(testDate){
//        var date_regex = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9]+$/;
//        if (!(date_regex.test(testDate))) {
if (!(testDate)){
return true;
}return true;
}
23:28:00.023 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:28:00.023 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'DBUtils' with new value: Java.type('executables.utils.DBUtils')
23:28:00.024 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'db' with new value: new DBUtils(apiComponents['DB_url'], apiComponents['DB_username'], apiComponents['DB_password'])
23:28:00.024 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:28:10.814 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:28:10.819 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature - call by tag at line 967: B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption
23:28:10.835 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:28:10.844 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:28:10.850 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:28:10.854 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('support.feature@switch_on_features')
23:28:10.856 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 211: switch_on_features
23:28:10.863 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:28:14.975 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('support.feature@switch_on_features')
23:28:15.082 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/coupon-codes
1 > Content-Type: application/json; charset=UTF-8
1 > multi_redeem-enabled: false
1 > x-client-type: mpos
1 > Content-Length: 267
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"masId":"100001000071385","billAmount":5000,"skuData":[{"skuId":"811143212221","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212222","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212223","articleId":"lol","skuQty":9,"skuPrice":11.4}]}

23:28:15.258 [main] DEBUG com.intuit.karate - response time in milliseconds: 174
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 17:58:15 GMT
1 < Content-Type: application/json
1 < Content-Length: 2090
{"skuCoupons":[{"skuId":"811143212223","quantity":9,"price":11.4,"coupons":[{"couponId":0,"discount":3.0,"couponCode":"KZBUGQTY","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":2,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"BR5QOFNP","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"37AXDJAG","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212221","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":2.1,"couponCode":"MT2SM3PA","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":2,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212222","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":1.1,"couponCode":"WN9VPI4N","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":1.1,"couponCode":"LNHS2BE9","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":0,"campaignType":0}]}],"billCoupons":[],"promotionsApplied":[],"promotionMetaData":{},"billVouchers":[{"voucherCode":"VoucherCode162e396","voucherTitle":"Automation vouchers Never delete 4","redeemCode":"UOUDICEH","discount":323.1}],"cartOffersApplied":null,"voucherRedemption":[],"prompter":[{"skuId":"811143212221","skuPrice":11.4,"couponId":167675,"couponTitle":"B2B_flat_discount_1_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":2.1,"requiredQuantity":2,"quantityToAdd":2,"remainingRedeemCount":99999522},{"skuId":"811143212222","skuPrice":11.4,"couponId":167676,"couponTitle":"B2B_flat_discount_2_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":1.1,"requiredQuantity":1,"quantityToAdd":1,"remainingRedeemCount":99998555},{"skuId":"811143212223","skuPrice":11.4,"couponId":167677,"couponTitle":"B2B_flat_discount_3_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":3.0,"requiredQuantity":3,"quantityToAdd":3,"remainingRedeemCount":99998151}]}
23:28:15.264 [main] INFO  com.intuit.karate - << lock released, cached callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:28:15.319 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: transactionID
23:28:15.327 [main] INFO  com.intuit.karate - << lock released, cached callonce: transactionID
23:28:18.719 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 1555780,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "37AXDJAG",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:28:15.264677",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:28:15.264677",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:28:15.267637"
  },
  {
    "ID": 1555779,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "BR5QOFNP",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:28:15.264677",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:28:15.264677",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:28:15.267637"
  },
  {
    "ID": 1555784,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "KZBUGQTY",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:28:15.264677",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:28:15.264677",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:28:15.267637"
  },
  {
    "ID": 1555782,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "LNHS2BE9",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:28:15.264677",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:28:15.264677",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:28:15.267637"
  },
  {
    "ID": 1555781,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "MT2SM3PA",
    "DISCOUNT_AMOUNT": 2.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:28:15.264677",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:28:15.264677",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167675,
    "CONDITIONAL_COUPON": 168280,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "HOLD_TS": "2022-01-28 23:28:15.267637"
  },
  {
    "ID": 1555783,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "WN9VPI4N",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:28:15.264677",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:28:15.264677",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:28:15.267637"
  }
]
 
23:28:22.988 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 167675,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": 185,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 5.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 2,
    "REDEEM_COUNT": 479,
    "SKU_ID": "811143212221",
    "SKU_NAME": "Crack Jack Biscuits 1",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "BILL_CONDITION": null
  },
  {
    "ID": 167676,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 1.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 1,
    "REDEEM_COUNT": 1447,
    "SKU_ID": "811143212222",
    "SKU_NAME": "Crack Jack Biscuits 2",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "BILL_CONDITION": null
  },
  {
    "ID": 167677,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 3,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 3,
    "REDEEM_COUNT": 1852,
    "SKU_ID": "811143212223",
    "SKU_NAME": "Crack Jack Biscuits 3",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-08 13:21:31.817789",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "BILL_CONDITION": null
  }
]
 
23:28:27.083 [main] INFO  com.intuit.karate - [print] [
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063788",
    "QUANTITY": 2
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070211",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063788",
    "QUANTITY": 1
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063788",
    "QUANTITY": 3
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071385",
    "QUANTITY": 452
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071385",
    "QUANTITY": 1408
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071385",
    "QUANTITY": 1794
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000072974",
    "QUANTITY": 0
  }
]
 
23:28:38.435 [main] ERROR com.intuit.karate - src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:90
* match parseInt(redeem_quantity_811143212221_c[0].QUANTITY) == parseInt(redeem_quantity_811143212221[0].QUANTITY + 1)
match failed: EQUALS
  $ | not equal (NUMBER:NUMBER)
  452
  451

src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:90
23:28:38.436 [main] INFO  com.intuit.karate - {
  "errorMessage": "match failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  452\n  451\n\nsrc/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:90",
  "featureDir": "/Users/rahul8.ranjan/Documents/cms-api-integration-test/src/test/java/executables/coupons",
  "scenarioDescription": "",
  "scenarioName": "B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.",
  "featureFileName": "0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature"
}
 
23:28:38.478 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:28:38.486 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:28:38.492 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:28:38.492 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'isValidDate' with new value: function(testDate){
//        var date_regex = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9]+$/;
//        if (!(date_regex.test(testDate))) {
if (!(testDate)){
return true;
}return true;
}
23:28:38.496 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:28:38.497 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'DBUtils' with new value: Java.type('executables.utils.DBUtils')
23:28:38.497 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'db' with new value: new DBUtils(apiComponents['DB_url'], apiComponents['DB_username'], apiComponents['DB_password'])
23:28:38.497 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:28:51.656 [main] INFO  com.intuit.karate - {
  "errorMessage": null,
  "featureDir": "/Users/rahul8.ranjan/Documents/cms-api-integration-test/src/test/java/executables/coupons",
  "scenarioDescription": "",
  "scenarioName": "B2B_FLAT_DISCOUNT_ON_SKU checkout Mark Redemption Flow __0036.",
  "featureFileName": "0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature"
}
 
23:28:52.540 [main] INFO  com.intuit.karate.Suite - <<fail>> feature 1 of 1 (0 remaining) src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature
23:30:34.193 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
23:30:34.198 [main] INFO  com.intuit.karate.Suite - backed up existing 'target/karate-reports' dir to: target/karate-reports_1643392834198
23:30:35.587 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:30:35.668 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:30:53.388 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:30:53.393 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature - call by tag at line 967: B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption
23:30:53.412 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:30:53.421 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:30:53.428 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:30:53.433 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('support.feature@switch_on_features')
23:30:53.434 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 211: switch_on_features
23:30:53.442 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:30:57.532 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('support.feature@switch_on_features')
23:30:57.626 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/coupon-codes
1 > Content-Type: application/json; charset=UTF-8
1 > multi_redeem-enabled: false
1 > x-client-type: mpos
1 > Content-Length: 267
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"masId":"100001000071385","billAmount":5000,"skuData":[{"skuId":"811143212221","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212222","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212223","articleId":"lol","skuQty":9,"skuPrice":11.4}]}

23:30:58.035 [main] DEBUG com.intuit.karate - response time in milliseconds: 406
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:00:58 GMT
1 < Content-Type: application/json
1 < Content-Length: 2090
{"skuCoupons":[{"skuId":"811143212223","quantity":9,"price":11.4,"coupons":[{"couponId":0,"discount":3.0,"couponCode":"GA97HOWF","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":2,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"LYZ7MYMP","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"FVYAQBAJ","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212221","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":2.1,"couponCode":"EFX7TLA1","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":2,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212222","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":1.1,"couponCode":"SLUMS2FV","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":1.1,"couponCode":"7KRLHG8W","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":0,"campaignType":0}]}],"billCoupons":[],"promotionsApplied":[],"promotionMetaData":{},"billVouchers":[{"voucherCode":"VoucherCode162e396","voucherTitle":"Automation vouchers Never delete 4","redeemCode":"UOUDICEH","discount":323.1}],"cartOffersApplied":null,"voucherRedemption":[],"prompter":[{"skuId":"811143212221","skuPrice":11.4,"couponId":167675,"couponTitle":"B2B_flat_discount_1_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":2.1,"requiredQuantity":2,"quantityToAdd":2,"remainingRedeemCount":99999522},{"skuId":"811143212222","skuPrice":11.4,"couponId":167676,"couponTitle":"B2B_flat_discount_2_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":1.1,"requiredQuantity":1,"quantityToAdd":1,"remainingRedeemCount":99998553},{"skuId":"811143212223","skuPrice":11.4,"couponId":167677,"couponTitle":"B2B_flat_discount_3_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":3.0,"requiredQuantity":3,"quantityToAdd":3,"remainingRedeemCount":99998148}]}
23:30:58.042 [main] INFO  com.intuit.karate - << lock released, cached callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:30:58.092 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: transactionID
23:30:58.101 [main] INFO  com.intuit.karate - << lock released, cached callonce: transactionID
23:30:59.333 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 1555796,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "7KRLHG8W",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:30:57.818433"
  },
  {
    "ID": 1555792,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "EFX7TLA1",
    "DISCOUNT_AMOUNT": 2.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167675,
    "CONDITIONAL_COUPON": 168280,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "HOLD_TS": "2022-01-28 23:30:57.818433"
  },
  {
    "ID": 1555791,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "FVYAQBAJ",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:30:57.818433"
  },
  {
    "ID": 1555795,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "GA97HOWF",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:30:57.818433"
  },
  {
    "ID": 1555793,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "LYZ7MYMP",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:30:57.818433"
  },
  {
    "ID": 1555794,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "SLUMS2FV",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:30:57.818433"
  }
]
 
23:31:01.568 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 167675,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": 185,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 5.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 2,
    "REDEEM_COUNT": 479,
    "SKU_ID": "811143212221",
    "SKU_NAME": "Crack Jack Biscuits 1",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "BILL_CONDITION": null
  },
  {
    "ID": 167676,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 1.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 1,
    "REDEEM_COUNT": 1449,
    "SKU_ID": "811143212222",
    "SKU_NAME": "Crack Jack Biscuits 2",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "BILL_CONDITION": null
  },
  {
    "ID": 167677,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 3,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 3,
    "REDEEM_COUNT": 1855,
    "SKU_ID": "811143212223",
    "SKU_NAME": "Crack Jack Biscuits 3",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-08 13:21:31.817789",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "BILL_CONDITION": null
  }
]
 
23:31:03.667 [main] INFO  com.intuit.karate - [print] [
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063788",
    "QUANTITY": 2
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070211",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063788",
    "QUANTITY": 1
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063788",
    "QUANTITY": 3
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071385",
    "QUANTITY": 452
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071385",
    "QUANTITY": 1410
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071385",
    "QUANTITY": 1797
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000072974",
    "QUANTITY": 0
  }
]
 
23:31:15.401 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:31:15.405 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:33:06.336 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
23:33:07.666 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:33:07.743 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:33:21.738 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:33:21.744 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature - call by tag at line 967: B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption
23:33:21.766 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:33:21.777 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:33:21.785 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:33:21.790 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('support.feature@switch_on_features')
23:33:21.791 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 211: switch_on_features
23:33:21.799 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:33:25.249 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/resetGetEligibleTxn
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate


23:33:25.689 [main] DEBUG com.intuit.karate - response time in milliseconds: 438
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:03:25 GMT
1 < Content-Type: application/json
1 < Content-Length: 41
"get eligible cron successfully executed"
23:33:25.695 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('support.feature@switch_on_features')
23:33:25.737 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/coupon-codes
1 > Content-Type: application/json; charset=UTF-8
1 > multi_redeem-enabled: false
1 > x-client-type: mpos
1 > Content-Length: 267
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"masId":"100001000071385","billAmount":5000,"skuData":[{"skuId":"811143212221","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212222","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212223","articleId":"lol","skuQty":9,"skuPrice":11.4}]}

23:33:26.001 [main] DEBUG com.intuit.karate - response time in milliseconds: 264
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:03:26 GMT
1 < Content-Type: application/json
1 < Content-Length: 2090
{"skuCoupons":[{"skuId":"811143212223","quantity":9,"price":11.4,"coupons":[{"couponId":0,"discount":3.0,"couponCode":"GA97HOWF","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":2,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"LYZ7MYMP","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"FVYAQBAJ","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212221","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":2.1,"couponCode":"EFX7TLA1","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":2,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212222","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":1.1,"couponCode":"7KRLHG8W","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":1.1,"couponCode":"SLUMS2FV","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":0,"campaignType":0}]}],"billCoupons":[],"promotionsApplied":[],"promotionMetaData":{},"billVouchers":[{"voucherCode":"VoucherCode162e396","voucherTitle":"Automation vouchers Never delete 4","redeemCode":"UOUDICEH","discount":323.1}],"cartOffersApplied":null,"voucherRedemption":[],"prompter":[{"skuId":"811143212221","skuPrice":11.4,"couponId":167675,"couponTitle":"B2B_flat_discount_1_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":2.1,"requiredQuantity":2,"quantityToAdd":2,"remainingRedeemCount":99999522},{"skuId":"811143212222","skuPrice":11.4,"couponId":167676,"couponTitle":"B2B_flat_discount_2_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":1.1,"requiredQuantity":1,"quantityToAdd":1,"remainingRedeemCount":99998553},{"skuId":"811143212223","skuPrice":11.4,"couponId":167677,"couponTitle":"B2B_flat_discount_3_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":3.0,"requiredQuantity":3,"quantityToAdd":3,"remainingRedeemCount":99998148}]}
23:33:26.006 [main] INFO  com.intuit.karate - << lock released, cached callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:33:26.060 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: transactionID
23:33:26.068 [main] INFO  com.intuit.karate - << lock released, cached callonce: transactionID
23:33:28.664 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 1555796,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "7KRLHG8W",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:33:25.898992"
  },
  {
    "ID": 1555792,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "EFX7TLA1",
    "DISCOUNT_AMOUNT": 2.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167675,
    "CONDITIONAL_COUPON": 168280,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "HOLD_TS": "2022-01-28 23:33:25.898992"
  },
  {
    "ID": 1555791,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "FVYAQBAJ",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:33:25.898992"
  },
  {
    "ID": 1555795,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "GA97HOWF",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:33:25.898992"
  },
  {
    "ID": 1555793,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "LYZ7MYMP",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:33:25.898992"
  },
  {
    "ID": 1555794,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "SLUMS2FV",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:33:25.898992"
  }
]
 
23:33:30.094 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 167675,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": 185,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 5.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 2,
    "REDEEM_COUNT": 479,
    "SKU_ID": "811143212221",
    "SKU_NAME": "Crack Jack Biscuits 1",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "BILL_CONDITION": null
  },
  {
    "ID": 167676,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 1.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 1,
    "REDEEM_COUNT": 1449,
    "SKU_ID": "811143212222",
    "SKU_NAME": "Crack Jack Biscuits 2",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "BILL_CONDITION": null
  },
  {
    "ID": 167677,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 3,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 3,
    "REDEEM_COUNT": 1855,
    "SKU_ID": "811143212223",
    "SKU_NAME": "Crack Jack Biscuits 3",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-08 13:21:31.817789",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "BILL_CONDITION": null
  }
]
 
23:33:33.665 [main] INFO  com.intuit.karate - [print] [
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063788",
    "QUANTITY": 2
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070211",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063788",
    "QUANTITY": 1
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063788",
    "QUANTITY": 3
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071385",
    "QUANTITY": 452
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071385",
    "QUANTITY": 1410
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071385",
    "QUANTITY": 1797
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000072974",
    "QUANTITY": 0
  }
]
 
23:34:36.790 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
23:34:38.106 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:34:38.179 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:34:54.543 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:34:54.552 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature - call by tag at line 967: B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption
23:34:54.586 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:34:54.599 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:34:54.611 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:34:54.619 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('support.feature@switch_on_features')
23:34:54.621 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 211: switch_on_features
23:34:54.633 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:34:58.916 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/resetGetEligibleTxn
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate


23:34:59.137 [main] DEBUG com.intuit.karate - response time in milliseconds: 218
1 < 400
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:04:59 GMT
1 < Content-Type: application/json
1 < Content-Length: 59
{"code":400,"message":"get eligible cron execution falied"}
23:34:59.143 [main] ERROR com.intuit.karate - src/test/java/executables/coupons/support.feature:217
Then status 200
status code was: 400, expected: 200, response time in milliseconds: 218, url: http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/resetGetEligibleTxn, response: 
{"code":400,"message":"get eligible cron execution falied"}
src/test/java/executables/coupons/support.feature:217
23:34:59.144 [main] ERROR com.intuit.karate - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature:9
* def call_configuration_table = callonce read('support.feature@switch_on_features')
status code was: 400, expected: 200, response time in milliseconds: 218, url: http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/resetGetEligibleTxn, response: 
{"code":400,"message":"get eligible cron execution falied"}
src/test/java/executables/coupons/support.feature:217
src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature:9
23:34:59.146 [main] ERROR com.intuit.karate - src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:28
* def result = callonce read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
status code was: 400, expected: 200, response time in milliseconds: 218, url: http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/resetGetEligibleTxn, response: 
{"code":400,"message":"get eligible cron execution falied"}
src/test/java/executables/coupons/support.feature:217
src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature:9
src/test/java/executables/coupons/0036__B2B_FLAT_DISCOUNT_ON_SKU_MarkRedemptionFlow.feature:28
23:34:59.202 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:34:59.207 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:36:56.688 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
23:36:58.015 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:36:58.089 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:37:11.712 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:37:11.719 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature - call by tag at line 967: B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption
23:37:11.740 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:37:11.749 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:37:11.757 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:37:11.762 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('support.feature@switch_on_features')
23:37:11.763 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 211: switch_on_features
23:37:11.771 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:37:14.246 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('support.feature@switch_on_features')
23:37:14.369 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/coupon-codes
1 > Content-Type: application/json; charset=UTF-8
1 > multi_redeem-enabled: false
1 > x-client-type: mpos
1 > Content-Length: 267
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"masId":"100001000071385","billAmount":5000,"skuData":[{"skuId":"811143212221","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212222","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212223","articleId":"lol","skuQty":9,"skuPrice":11.4}]}

23:37:14.529 [main] DEBUG com.intuit.karate - response time in milliseconds: 158
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:07:14 GMT
1 < Content-Type: application/json
1 < Content-Length: 2090
{"skuCoupons":[{"skuId":"811143212223","quantity":9,"price":11.4,"coupons":[{"couponId":0,"discount":3.0,"couponCode":"GA97HOWF","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":2,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"LYZ7MYMP","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"FVYAQBAJ","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212221","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":2.1,"couponCode":"EFX7TLA1","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":2,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212222","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":1.1,"couponCode":"7KRLHG8W","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":1.1,"couponCode":"SLUMS2FV","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":0,"campaignType":0}]}],"billCoupons":[],"promotionsApplied":[],"promotionMetaData":{},"billVouchers":[{"voucherCode":"VoucherCode162e396","voucherTitle":"Automation vouchers Never delete 4","redeemCode":"UOUDICEH","discount":323.1}],"cartOffersApplied":null,"voucherRedemption":[],"prompter":[{"skuId":"811143212221","skuPrice":11.4,"couponId":167675,"couponTitle":"B2B_flat_discount_1_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":2.1,"requiredQuantity":2,"quantityToAdd":2,"remainingRedeemCount":99999522},{"skuId":"811143212222","skuPrice":11.4,"couponId":167676,"couponTitle":"B2B_flat_discount_2_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":1.1,"requiredQuantity":1,"quantityToAdd":1,"remainingRedeemCount":99998553},{"skuId":"811143212223","skuPrice":11.4,"couponId":167677,"couponTitle":"B2B_flat_discount_3_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":3.0,"requiredQuantity":3,"quantityToAdd":3,"remainingRedeemCount":99998148}]}
23:37:14.534 [main] INFO  com.intuit.karate - << lock released, cached callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:37:14.599 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: transactionID
23:37:14.606 [main] INFO  com.intuit.karate - << lock released, cached callonce: transactionID
23:37:15.814 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 1555796,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "7KRLHG8W",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:37:14.550007"
  },
  {
    "ID": 1555792,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "EFX7TLA1",
    "DISCOUNT_AMOUNT": 2.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167675,
    "CONDITIONAL_COUPON": 168280,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "HOLD_TS": "2022-01-28 23:37:14.550007"
  },
  {
    "ID": 1555791,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "FVYAQBAJ",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:37:14.550007"
  },
  {
    "ID": 1555795,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "GA97HOWF",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:37:14.550007"
  },
  {
    "ID": 1555793,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "LYZ7MYMP",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:37:14.550007"
  },
  {
    "ID": 1555794,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "SLUMS2FV",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:37:14.550007"
  }
]
 
23:37:18.810 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 167675,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": 185,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 5.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 2,
    "REDEEM_COUNT": 479,
    "SKU_ID": "811143212221",
    "SKU_NAME": "Crack Jack Biscuits 1",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "BILL_CONDITION": null
  },
  {
    "ID": 167676,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 1.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 1,
    "REDEEM_COUNT": 1449,
    "SKU_ID": "811143212222",
    "SKU_NAME": "Crack Jack Biscuits 2",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "BILL_CONDITION": null
  },
  {
    "ID": 167677,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 3,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 3,
    "REDEEM_COUNT": 1855,
    "SKU_ID": "811143212223",
    "SKU_NAME": "Crack Jack Biscuits 3",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-08 13:21:31.817789",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "BILL_CONDITION": null
  }
]
 
23:37:20.759 [main] INFO  com.intuit.karate - [print] [
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063788",
    "QUANTITY": 2
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070211",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063788",
    "QUANTITY": 1
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063788",
    "QUANTITY": 3
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071385",
    "QUANTITY": 453
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071385",
    "QUANTITY": 1412
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071385",
    "QUANTITY": 1799
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000072974",
    "QUANTITY": 0
  }
]
 
23:39:12.700 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
23:39:14.039 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:39:14.122 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:39:23.614 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:39:23.621 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature - call by tag at line 967: B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption
23:39:23.644 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:39:23.653 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:39:23.662 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:39:23.667 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('support.feature@switch_on_features')
23:39:23.669 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 211: switch_on_features
23:39:23.677 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:39:26.723 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('support.feature@switch_on_features')
23:39:26.835 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/coupon-codes
1 > Content-Type: application/json; charset=UTF-8
1 > multi_redeem-enabled: false
1 > x-client-type: mpos
1 > Content-Length: 267
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"masId":"100001000071385","billAmount":5000,"skuData":[{"skuId":"811143212221","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212222","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212223","articleId":"lol","skuQty":9,"skuPrice":11.4}]}

23:39:26.995 [main] DEBUG com.intuit.karate - response time in milliseconds: 158
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:09:27 GMT
1 < Content-Type: application/json
1 < Content-Length: 2090
{"skuCoupons":[{"skuId":"811143212223","quantity":9,"price":11.4,"coupons":[{"couponId":0,"discount":3.0,"couponCode":"GA97HOWF","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":2,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"LYZ7MYMP","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"FVYAQBAJ","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212221","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":2.1,"couponCode":"EFX7TLA1","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":2,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212222","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":1.1,"couponCode":"7KRLHG8W","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":1.1,"couponCode":"SLUMS2FV","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":0,"campaignType":0}]}],"billCoupons":[],"promotionsApplied":[],"promotionMetaData":{},"billVouchers":[{"voucherCode":"VoucherCode162e396","voucherTitle":"Automation vouchers Never delete 4","redeemCode":"UOUDICEH","discount":323.1}],"cartOffersApplied":null,"voucherRedemption":[],"prompter":[{"skuId":"811143212221","skuPrice":11.4,"couponId":167675,"couponTitle":"B2B_flat_discount_1_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":2.1,"requiredQuantity":2,"quantityToAdd":2,"remainingRedeemCount":99999522},{"skuId":"811143212222","skuPrice":11.4,"couponId":167676,"couponTitle":"B2B_flat_discount_2_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":1.1,"requiredQuantity":1,"quantityToAdd":1,"remainingRedeemCount":99998553},{"skuId":"811143212223","skuPrice":11.4,"couponId":167677,"couponTitle":"B2B_flat_discount_3_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":3.0,"requiredQuantity":3,"quantityToAdd":3,"remainingRedeemCount":99998148}]}
23:39:27.000 [main] INFO  com.intuit.karate - << lock released, cached callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:39:27.052 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: transactionID
23:39:27.058 [main] INFO  com.intuit.karate - << lock released, cached callonce: transactionID
23:39:28.738 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 1555796,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "7KRLHG8W",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:39:27.016756"
  },
  {
    "ID": 1555792,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "EFX7TLA1",
    "DISCOUNT_AMOUNT": 2.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167675,
    "CONDITIONAL_COUPON": 168280,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "HOLD_TS": "2022-01-28 23:39:27.016756"
  },
  {
    "ID": 1555791,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "FVYAQBAJ",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:39:27.016756"
  },
  {
    "ID": 1555795,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "GA97HOWF",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:39:27.016756"
  },
  {
    "ID": 1555793,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "LYZ7MYMP",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:39:27.016756"
  },
  {
    "ID": 1555794,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "SLUMS2FV",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:39:27.016756"
  }
]
 
23:39:31.347 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 167675,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": 185,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 5.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 2,
    "REDEEM_COUNT": 479,
    "SKU_ID": "811143212221",
    "SKU_NAME": "Crack Jack Biscuits 1",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "BILL_CONDITION": null
  },
  {
    "ID": 167676,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 1.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 1,
    "REDEEM_COUNT": 1449,
    "SKU_ID": "811143212222",
    "SKU_NAME": "Crack Jack Biscuits 2",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "BILL_CONDITION": null
  },
  {
    "ID": 167677,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 3,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 3,
    "REDEEM_COUNT": 1855,
    "SKU_ID": "811143212223",
    "SKU_NAME": "Crack Jack Biscuits 3",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-08 13:21:31.817789",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "BILL_CONDITION": null
  }
]
 
23:39:33.557 [main] INFO  com.intuit.karate - [print] [
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063788",
    "QUANTITY": 2
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070211",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063788",
    "QUANTITY": 1
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063788",
    "QUANTITY": 3
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071385",
    "QUANTITY": 453
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071385",
    "QUANTITY": 1412
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071385",
    "QUANTITY": 1799
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000072974",
    "QUANTITY": 0
  }
]
 
23:40:19.748 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js
23:40:21.100 [main] INFO  com.intuit.karate - Environment value is==========> eat 
23:40:21.184 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:40:35.914 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:40:35.922 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/B2C_B2B_CouponCodeGeneration.feature - call by tag at line 967: B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption
23:40:35.945 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 11: common_functions
23:40:35.955 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:40:35.964 [main] DEBUG c.intuit.karate.core.ScenarioEngine - over-writing existing variable 'apiComponents' with new value: envConfig
23:40:35.969 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: read('support.feature@switch_on_features')
23:40:35.971 [main] INFO  c.intuit.karate.core.FeatureRuntime - src/test/java/executables/coupons/support.feature - call by tag at line 211: switch_on_features
23:40:35.982 [main] INFO  executables.utils.DBUtils - init jdbc template: jdbc:oracle:thin:@10.159.20.64:1521:JCUPONDB
23:40:39.451 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/resetGetEligibleTxn
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate


23:40:39.994 [main] DEBUG com.intuit.karate - response time in milliseconds: 541
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:10:40 GMT
1 < Content-Type: application/json
1 < Content-Length: 41
"get eligible cron successfully executed"
23:40:40.000 [main] INFO  com.intuit.karate - << lock released, cached callonce: read('support.feature@switch_on_features')
23:40:40.040 [main] DEBUG com.intuit.karate - request:
1 > POST http://10.159.20.62:9000/coupons/v1/coupons/merchant/fc/coupon-codes
1 > Content-Type: application/json; charset=UTF-8
1 > multi_redeem-enabled: false
1 > x-client-type: mpos
1 > Content-Length: 267
1 > Host: 10.159.20.62:9000
1 > Connection: Keep-Alive
1 > User-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_261)
1 > Accept-Encoding: gzip,deflate
{"masId":"100001000071385","billAmount":5000,"skuData":[{"skuId":"811143212221","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212222","articleId":"lol","skuQty":2,"skuPrice":11.4},{"skuId":"811143212223","articleId":"lol","skuQty":9,"skuPrice":11.4}]}

23:40:40.179 [main] DEBUG com.intuit.karate - response time in milliseconds: 138
1 < 200
1 < Vary: Origin
1 < Date: Fri, 28 Jan 2022 18:10:40 GMT
1 < Content-Type: application/json
1 < Content-Length: 2090
{"skuCoupons":[{"skuId":"811143212223","quantity":9,"price":11.4,"coupons":[{"couponId":0,"discount":3.0,"couponCode":"GA97HOWF","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":2,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"LYZ7MYMP","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":3.0,"couponCode":"FVYAQBAJ","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":3,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212221","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":2.1,"couponCode":"EFX7TLA1","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":2,"couponQty":0,"priority":0,"campaignType":0}]},{"skuId":"811143212222","quantity":2,"price":11.4,"coupons":[{"couponId":0,"discount":1.1,"couponCode":"7KRLHG8W","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":1,"campaignType":0},{"couponId":0,"discount":1.1,"couponCode":"SLUMS2FV","discountType":"FLAT_DISCOUNT_ON_SKU","quantity":1,"couponQty":0,"priority":0,"campaignType":0}]}],"billCoupons":[],"promotionsApplied":[],"promotionMetaData":{},"billVouchers":[{"voucherCode":"VoucherCode162e396","voucherTitle":"Automation vouchers Never delete 4","redeemCode":"UOUDICEH","discount":323.1}],"cartOffersApplied":null,"voucherRedemption":[],"prompter":[{"skuId":"811143212221","skuPrice":11.4,"couponId":167675,"couponTitle":"B2B_flat_discount_1_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":2.1,"requiredQuantity":2,"quantityToAdd":2,"remainingRedeemCount":99999522},{"skuId":"811143212222","skuPrice":11.4,"couponId":167676,"couponTitle":"B2B_flat_discount_2_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":1.1,"requiredQuantity":1,"quantityToAdd":1,"remainingRedeemCount":99998553},{"skuId":"811143212223","skuPrice":11.4,"couponId":167677,"couponTitle":"B2B_flat_discount_3_never_delete","b2BDiscountType":"FLAT_DISCOUNT_ON_SKU","discountValue":3.0,"requiredQuantity":3,"quantityToAdd":3,"remainingRedeemCount":99998148}]}
23:40:40.186 [main] INFO  com.intuit.karate - << lock released, cached callonce: read("B2C_B2B_CouponCodeGeneration.feature@B2B_FLAT_DISCOUNT_ON_SKU_coupon_redemption") {requestHeader: #(headerJson) , skuPrice: #(sku_price), billAmount: #(bill_amount)}
23:40:40.242 [main] INFO  com.intuit.karate - >> lock acquired, begin callonce: transactionID
23:40:40.249 [main] INFO  com.intuit.karate - << lock released, cached callonce: transactionID
23:40:41.553 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 1555796,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "7KRLHG8W",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:40:40.199247"
  },
  {
    "ID": 1555792,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "EFX7TLA1",
    "DISCOUNT_AMOUNT": 2.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167675,
    "CONDITIONAL_COUPON": 168280,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "HOLD_TS": "2022-01-28 23:40:40.199247"
  },
  {
    "ID": 1555791,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "FVYAQBAJ",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:40:40.199247"
  },
  {
    "ID": 1555795,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "GA97HOWF",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:40:40.199247"
  },
  {
    "ID": 1555793,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "LYZ7MYMP",
    "DISCOUNT_AMOUNT": 3,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167677,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "HOLD_TS": "2022-01-28 23:40:40.199247"
  },
  {
    "ID": 1555794,
    "COUPON": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "MASID": "100001000071385",
    "CUSTOMER_COUPON_CODE": null,
    "MERCHANT_COUPON_CODE": "SLUMS2FV",
    "DISCOUNT_AMOUNT": 1.1,
    "STATUS": "hold",
    "TRANSACTION_ID": "0",
    "CREATE_TS": "2022-01-28 23:30:57.815309",
    "CHECKOUT_TS": null,
    "VERIFY_TS": null,
    "REDEEM_TS": null,
    "UPDATE_TS": "2022-01-28 23:30:57.815309",
    "CANCEL_TS": null,
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "DELIVERED_TS": null,
    "CAMPAIGN_TYPE": 0,
    "B2B_COUPON_ID": 167676,
    "CONDITIONAL_COUPON": null,
    "DISPLAY_NAME_ID": 1,
    "CATEGORY_ID": 2,
    "SUB_CATEGORY_ID": 3,
    "CAMPAIGN_ID": 1,
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "HOLD_TS": "2022-01-28 23:40:40.199247"
  }
]
 
23:40:44.364 [main] INFO  com.intuit.karate - [print] [
  {
    "ID": 167675,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": 185,
    "COUPON_TITLE": "B2B_flat_discount_1_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 5.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 2,
    "REDEEM_COUNT": 479,
    "SKU_ID": "811143212221",
    "SKU_NAME": "Crack Jack Biscuits 1",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 450,
    "BILL_CONDITION": null
  },
  {
    "ID": 167676,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_2_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 1.1,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 1,
    "REDEEM_COUNT": 1449,
    "SKU_ID": "811143212222",
    "SKU_NAME": "Crack Jack Biscuits 2",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-06 16:40:01.960191",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 400.5,
    "BILL_CONDITION": null
  },
  {
    "ID": 167677,
    "B2C_COUPON_ID": null,
    "CAMPAIGN_ID": 1,
    "CAMPAIGN_TYPE": 4,
    "CONDITIONAL_COUPON_ID": null,
    "COUPON_TITLE": "B2B_flat_discount_3_never_delete",
    "CREATE_TS": "2021-09-02 16:35:19.121361",
    "DERIVED_FROM": null,
    "DISCOUNT_AMOUNT": 3,
    "MASID": null,
    "MERCHANT_GROUP": 581,
    "MERCHANT_REDEEM_CAP": 100000000,
    "QUANTITY": 3,
    "REDEEM_COUNT": 1855,
    "SKU_ID": "811143212223",
    "SKU_NAME": "Crack Jack Biscuits 3",
    "STATUS": 0,
    "TOTAL_REDEEM_CAP": 100000000,
    "UPDATE_TS": "2021-12-08 13:21:31.817789",
    "VALID_FROM": "2020-05-13 00:00:00.0",
    "VALID_TO": "2029-12-11 00:00:00.0",
    "VENDOR_FUNDING": "No",
    "VENDOR_CONTRIBUTION": 0,
    "MINIMUM_BILL_VALUE": 500,
    "BILL_CONDITION": null
  }
]
 
23:40:46.675 [main] INFO  com.intuit.karate - [print] [
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063788",
    "QUANTITY": 2
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070211",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063788",
    "QUANTITY": 1
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063788",
    "QUANTITY": 3
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000217520",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071385",
    "QUANTITY": 453
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071385",
    "QUANTITY": 1412
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071385",
    "QUANTITY": 1799
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000063836",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000071386",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000070644",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167675,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167676,
    "MASID": "100001000072974",
    "QUANTITY": 0
  },
  {
    "B2B_COUPON_ID": 167677,
    "MASID": "100001000072974",
    "QUANTITY": 0
  }
]
 
